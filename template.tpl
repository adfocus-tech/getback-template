___INFO___

{
  "displayName": "Getback Tag",
  "description": "Getback Tag",
  "securityGroups": [],
  "id": "cvt_temp_public_id",
  "type": "TAG",
  "version": 1,
  "brand": {
    "thumbnail": "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQAAAAEACAYAAABccqhmAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQ1IDc5LjE2MzQ5OSwgMjAxOC8wOC8xMy0xNjo0MDoyMiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTkgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjk3MDY0NDYzQzNFRjExRTk4OURERjc5OTBBQjZDNkJFIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjk3MDY0NDY0QzNFRjExRTk4OURERjc5OTBBQjZDNkJFIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6OTcwNjQ0NjFDM0VGMTFFOTg5RERGNzk5MEFCNkM2QkUiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6OTcwNjQ0NjJDM0VGMTFFOTg5RERGNzk5MEFCNkM2QkUiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz5c2znVAAATw0lEQVR42uyd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",
    "displayName": "",
    "id": "brand_dummy"
  },
  "containerContexts": [
    "WEB"
  ]
}


___TEMPLATE_PARAMETERS___

[
  {
    "macrosInSelect": false,
    "selectItems": [
      {
        "displayValue": "Page View",
        "value": "pageview"
      },
      {
        "displayValue": "Conversion",
        "value": "conversion"
      }
    ],
    "displayName": "Type",
    "simpleValueType": true,
    "name": "type",
    "type": "SELECT"
  },
  {
    "help": "ID of Getback client (provided from your contact person)",
    "alwaysInSummary": false,
    "valueValidators": [
      {
        "args": [
          4,
          6
        ],
        "errorMessage": "The ID must be a string with 4 to 6 letters",
        "type": "STRING_LENGTH"
      }
    ],
    "displayName": "Getback ID",
    "simpleValueType": true,
    "name": "getbackId",
    "type": "TEXT",
    "valueHint": "e.g. e5s4v"
  },
  {
    "help": "Dynamic Order Number on checkout complete page",
    "valueValidators": [
      {
        "type": "NON_EMPTY"
      }
    ],
    "enablingConditions": [
      {
        "paramName": "type",
        "type": "EQUALS",
        "paramValue": "conversion"
      }
    ],
    "displayName": "Order Number",
    "simpleValueType": true,
    "name": "orderNumber",
    "type": "TEXT"
  },
  {
    "help": "Dynamic Order Value on checkout complete page",
    "valueValidators": [
      {
        "type": "NON_EMPTY"
      }
    ],
    "enablingConditions": [
      {
        "paramName": "type",
        "type": "EQUALS",
        "paramValue": "conversion"
      }
    ],
    "displayName": "Order Value",
    "simpleValueType": true,
    "name": "orderValue",
    "type": "TEXT"
  },
  {
    "help": "Dynamic Voucher Code on checkout complete page",
    "enablingConditions": [
      {
        "paramName": "type",
        "type": "EQUALS",
        "paramValue": "conversion"
      }
    ],
    "displayName": "Voucher Code",
    "simpleValueType": true,
    "name": "voucherCode",
    "type": "TEXT"
  },
  {
    "help": "Enable if you want to differentiate different sale rates (i.e. new and existing customer)",
    "enablingConditions": [
      {
        "paramName": "type",
        "type": "EQUALS",
        "paramValue": "conversion"
      }
    ],
    "simpleValueType": true,
    "name": "enableRates",
    "checkboxText": "Enable different rates",
    "type": "CHECKBOX"
  },
  {
    "help": "Rate ID",
    "enablingConditions": [
      {
        "paramName": "enableRates",
        "type": "EQUALS",
        "paramValue": true
      }
    ],
    "displayName": "Rate ID",
    "simpleValueType": true,
    "name": "rate",
    "type": "TEXT"
  },
  {
    "enablingConditions": [
      {
        "paramName": "type",
        "type": "EQUALS",
        "paramValue": "conversion"
      }
    ],
    "displayName": "Add more information",
    "name": "addMoreInformation",
    "groupStyle": "ZIPPY_CLOSED",
    "type": "GROUP",
    "subParams": [
      {
        "defaultValue": false,
        "simpleValueType": true,
        "name": "addEmail",
        "checkboxText": "Add customer email to transaction",
        "type": "CHECKBOX"
      },
      {
        "help": "Dynamic customer e-mail-adress on checkout complete page",
        "enablingConditions": [
          {
            "paramName": "addEmail",
            "type": "EQUALS",
            "paramValue": true
          }
        ],
        "displayName": "Customer E-Mail",
        "simpleValueType": true,
        "name": "email",
        "type": "TEXT"
      },
      {
        "defaultValue": false,
        "simpleValueType": true,
        "name": "addCustomInformation",
        "checkboxText": "Add custom information to transaction",
        "type": "CHECKBOX"
      },
      {
        "help": "Any custom information you want to add to the transaction",
        "enablingConditions": [
          {
            "paramName": "addCustomInformation",
            "type": "EQUALS",
            "paramValue": true
          }
        ],
        "displayName": "Custom Information",
        "simpleValueType": true,
        "name": "customInformation",
        "type": "TEXT"
      }
    ]
  },
  {
    "simpleValueType": true,
    "name": "debug",
    "checkboxText": "Log debug messages to console",
    "type": "CHECKBOX"
  }
]


___WEB_PERMISSIONS___

[
  {
    "instance": {
      "key": {
        "publicId": "logging",
        "versionId": "1"
      },
      "param": [
        {
          "key": "environments",
          "value": {
            "type": 1,
            "string": "all"
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "inject_script",
        "versionId": "1"
      },
      "param": [
        {
          "key": "urls",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 1,
                "string": "https://*.getback.ch/"
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  }
]


___SANDBOXED_JS_FOR_WEB_TEMPLATE___

// Require the necessary APIs
const logToConsole = require('logToConsole');
const injectScript = require('injectScript');
const queryPermission = require('queryPermission');
const encode = require('encodeUriComponent');

const id = data.getbackId;
const orderValue = data.orderValue;
const orderNumber = data.orderNumber;
const voucherCode = data.voucherCode;
const email = data.email;
const subText = data.customInformation;
const rate = data.rate;
let url = '';

if (data.type == 'conversion') {
  url = 'https://www.getback.ch/' + id + '/conversion/?ordervalue=' + orderValue + '&ordernumber=' + orderNumber;

  voucherCode ? url += '&vouchercode=' + encode(voucherCode) : '';
  email ? url += '&email=' + encode(email) : '';
  subText ? url += '&subtext=' + encode(subText) : '';
  rate ? url += '&rate=' + encode(rate) : '';
} else if (data.type == 'pageview') {
   url = 'https://www.getback.ch/' + id;
}

// If the user chose to log debug output, initialize the logging method
const log = data.debug ? logToConsole : (() => {});

log('Getback Conversion Tracking: Loading script from ' + url);

// If the script loaded successfully, log a message and signal success
const onSuccess = () => {
  log('Getback: Script loaded successfully.');
  data.gtmOnSuccess();
};


// If the script fails to load, log a message and signal failure
const onFailure = () => {
  log('Getback Conversion Tracking: Script load failed.');
  data.gtmOnFailure();
};


// If the URL input by the user matches the permissions set for the template,
// inject the script with the onSuccess and onFailure methods as callbacks.
if (queryPermission('inject_script', url)) {
  injectScript(url, onSuccess, onFailure);
} else {
  log('Getback Conversion Tracking: Script load failed due to permissions mismatch.');
  data.gtmOnFailure();
}


___NOTES___

Created on 6/20/2019, 10:43:31 AM
